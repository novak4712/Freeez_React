import React, {useContext, useEffect, useState} from "react";

import {CurrentThemeContext} from "contexts/currentTheme";
import ServicesItem from 'components/ServicesItem'

import styles from './ExpressDesign.module.scss'
import ButtonFreeez from "components/ButtonFreeez";


const ExpressDesign = () => {
    const [currentThemeState] = useContext(CurrentThemeContext);
    const [total, setTotal] = useState([]);
    const firstData = {
        name: '2D GRAPHICS SERVICE',
        content: ['NAMING CREATION', 'LOGOTYPE', 'LOGOBOOK', 'GUIDELINES', 'BRANDBOOK', 'PACKAGE DESIGN', 'LABEL DESIGN', 'PRODUCT ADAPTATION', 'CALENDAR XL', 'CALENDAR L', 'POSTER DESIGN', 'BILL BOARD', 'CATALOG', 'FLYER', 'WEBSITE', 'APP DESIGN', 'ICONS', 'STICKERS', '3-FOLD BOOKLET']
    }
    const secondData = {
        name: '3D GRAPHICS SERVICE',
        content: ['2D TO 3D', 'LOGOTYPE', 'SIGNBOARD', 'CHARACTER', 'BACKGROUND', 'RENDER', 'CONVERSION', 'ANIMATION', 'RIGGING']
    }
    const thirdData = {
        name: 'MOTION GRAPHICS SERVICE',
        content: ['LOGOTYPE', 'INTRO', 'OUTRO', 'CLIPMAKING', 'ANIMATION']
    }
    const handleClick = (item, isActive) => {
        let arrItems = total;

        if (!arrItems.includes(item) && isActive) {
            const newArr = [item];
            arrItems = arrItems.concat(newArr);
        }
        if (arrItems.includes(item) && !isActive) {
            arrItems = arrItems.filter(function (elem) {
                return elem !== item;
            });
        }
        setTotal(arrItems);
    }

    return (
        <div className={`${styles.expressDesignWrapper} ${currentThemeState.isLight ? styles.light : styles.dark}`}>
            <div className={styles.expressDesign}>
                <div className={`${styles.column} ${styles.twinsColumn}`}>
                    <ItemsColumn data={firstData} handleClick={handleClick}/>
                </div>
                <div className={`${styles.column} ${styles.onceColumn}`}>
                    <ItemsColumn data={secondData} handleClick={handleClick}/>
                </div>
                <div className={`${styles.column} ${styles.onceColumn}`}>
                    <ItemsColumn data={thirdData} handleClick={handleClick}/>
                </div>
                <div className={`${styles.column} ${styles.onceColumn}`}>
                    <div className={`${styles.column} ${styles.totalColumn}`}>
                        <div className={styles.headerColumn}>
                            <div className={styles.nameColumn}>
                                total
                            </div>
                        </div>
                        <div className={styles.contentWrapper}>
                            <div className={styles.scrollContent}>
                                {
                                    total.map((item, idx) => {
                                        return (
                                            <ServicesItem text={item} key={`${item}-${idx}`} state={true}/>
                                        )
                                    })
                                }
                            </div>
                        </div>
                        <div className={styles.buttonWrapper}>
                            <ButtonFreeez text='PROCEED TO CHECKOUT'  theme='dark' width='100%' align='center'/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    )
};

const ItemsColumn = ({data, handleClick}) => {
    const {name, content} = data;
    return (
        <div className={styles.itemsColumn}>
            <div className={styles.headerColumn}>
                <div className={styles.nameColumn}>
                    {name}
                </div>
            </div>
            <div className={styles.contentWrapper}>
                <div className={styles.scrollContent}>
                    {
                        content.map((item, idx) => {
                            return (
                                <ServicesItem text={item} key={`${item}-${idx}`} handleClick={handleClick}/>
                            )
                        })
                    }
                </div>

            </div>
        </div>
    )
}

export default ExpressDesign;