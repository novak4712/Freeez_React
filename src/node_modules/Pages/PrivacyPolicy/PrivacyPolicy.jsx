import React, {useContext, useEffect} from "react";

import {CurrentThemeContext} from "contexts/currentTheme";
import useFetch from "hooks/useFetch";

import styles from './PrivacyPolicy.module.scss'


const PrivacyPolicy = ({history}) => {
    const [currentThemeState] = useContext(CurrentThemeContext);
    const langPage = currentThemeState.isLang === 'ru' ? 598 : 601;
    const back = currentThemeState.isLang === 'ru' ? 'НАЗАД' : 'BACK';
    let apiUrl = `/wp-json/wp/v2/pages/${langPage}`;
    const [{response, isLoading}, doFetch] = useFetch(apiUrl);

    useEffect(() => {
        doFetch()
    }, [doFetch, langPage])


    return (
        <div className={`${styles.privacyPolicyWrapper} ${currentThemeState.isLight ? styles.light : styles.dark}`}>

            {isLoading && <div>Loading...</div>}
            {!isLoading && response &&
            <div className={styles.privacyPolicyContent}>
                <div className={styles.privacyPolicyHeader}>{response.title.rendered}</div>
                <div dangerouslySetInnerHTML={{__html: response.content.rendered}} className={styles.privacyPolicyText}/>
            </div>}
            <div className={styles.pageLinkWrapper}>
                <div className={styles.pageLink} onClick={() => history.goBack()}>
                    {back}
                </div>
            </div>
        </div>
    )
};

export default PrivacyPolicy;
