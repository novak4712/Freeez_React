import React, {useEffect, useContext} from "react";

import styles from './CartContact.module.scss'
import useFetch from 'hooks/useFetch';
import {CurrentThemeContext} from "contexts/currentTheme";
import SinglePhoto from "components/SinglePhoto";

const CartContact = ({idWorker}) => {
    const [currentThemeState] = useContext(CurrentThemeContext);
    const apiUrl = `/wp-json/wp/v2/workers/${idWorker}`
    const [{response, isLoading}, doFetch] = useFetch(apiUrl)
    let text = '';
    let name = '';
    let workerImg = '';
    let workerImgNorm = '';

    useEffect(() => {
        doFetch()
    }, [doFetch])

    if (response) {
        text = response.main_text;
        name = response.worker_name;
        workerImg = response['worker-img'];
        workerImgNorm = response['worker-img-norm'];
    }
    console.log(response);
    return (
        (isLoading) ? <div>Loading...</div> :
            <div className={`${styles.cartContact} ${currentThemeState.isLight ? styles.light : styles.dark}`}>

                <div className={styles.detailPhoto}>
                    <div className={styles.skullImage}>
                        <SinglePhoto idImg={workerImg}/>
                    </div>
                    <div className={styles.normImage}>
                        <SinglePhoto idImg={workerImgNorm}/>
                    </div>
                </div>

                <div className={styles.textWrapper}>
                    <div className={styles.nameWorker}>
                        {name}
                    </div>
                    <div dangerouslySetInnerHTML={{__html: text}} className={styles.mainText}/>
                </div>

            </div>

    )
}
export default CartContact
