import React, {useEffect} from "react";

import styles from './SinglePhoto.module.scss'
import useFetch from 'hooks/useFetch';

const SinglePhoto = ({id, idImg}) => {
    const apiUrl = '/media?parent=' + id
    const [{response, isLoading, error}, doFetch] = useFetch(apiUrl)
    let alt = ''
    let url = ''

    useEffect(() => {
        doFetch()
    }, [doFetch])

    if (response) {
        response.map((item) => {
            if(+item.id === +idImg){
                url = item.source_url
                alt = item.alt_text
            }
        })
    }

    return (
        <React.Fragment>
            {(isLoading) ? <div>Loading...</div> :
                <img src={url} alt={alt} className={styles.singlePhoto}/>}
        </React.Fragment>

    )
}
export default SinglePhoto
