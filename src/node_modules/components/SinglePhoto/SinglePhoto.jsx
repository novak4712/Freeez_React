import React, {useEffect} from "react";

import styles from './SinglePhoto.module.scss'
import useFetch from 'hooks/useFetch';

const SinglePhoto = ({idImg}) => {
    const apiUrl = `/wp-json/wp/v2/media?per_page=100`
    const [{response, isLoading}, doFetch] = useFetch(apiUrl)
    let alt = ''
    let url = ''

    useEffect(() => {
        doFetch()
    }, [doFetch])

    if (response) {
        // eslint-disable-next-line array-callback-return
        response.map((item) => {
            if(+item.id === +idImg){
                url = item.source_url
                alt = item.alt_text
            }
        })
    }
    return (
        <React.Fragment>
            { url.length ?
                (isLoading) ? <div>Loading...</div> :
                <img src={url} alt={alt} className={styles.singlePhoto}/> : ''
            }
        </React.Fragment>
    )
}
export default SinglePhoto
