import React, {useContext, useState, useEffect} from 'react'

import {CurrentThemeContext} from "contexts/currentTheme";
import styles from './Cursor.module.scss'


const Cursor = () => {
    const [currentThemeState] = useContext(CurrentThemeContext);
    const [top, setTop] = useState(0);
    const [left, setLeft] = useState(0);
    const [expand, setExpand] = useState(false);



    const handleMoveMouse = (e) => {
        setLeft(e.pageX - 10)
        setTop(e.pageY - 10)
    }

    const handleClickMouse = () => {
        setExpand(true);
        setTimeout(() => {
            setExpand(false);
        }, 500)
    }

    useEffect(() => {
        window.addEventListener("mousemove", handleMoveMouse, false);
        window.addEventListener("click", handleClickMouse, false);
        return ()=>{
            window.removeEventListener("mousemove", handleMoveMouse, false);
            window.removeEventListener("click", handleClickMouse, false);
        }
    }, [])

    return (
        <div
            className={`${styles.cursor} ${currentThemeState.isLight ? styles.light : styles.dark} ${expand ? styles.expand : ''}`}
            style={{top: top, left: left}}> </div>
    )
}

export default Cursor
